<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Eternal Universe üîêüí´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
            background: #000;
            color: #fff;
            position: fixed;
            width: 100%;
            height: 100vh;
            touch-action: pan-y pinch-zoom;
        }

        .scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 1s ease;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            touch-action: pan-y;
        }

        .scene.active {
            display: flex;
            opacity: 1;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* PIN ENTRY SCENE */
        #pinScene {
            flex-direction: column;
            z-index: 10;
        }

        .pin-container {
            text-align: center;
            z-index: 10;
            padding: 20px;
            width: 100%;
            max-width: 500px;
        }

        .cosmic-text {
            font-size: clamp(1rem, 4vw, 1.8rem);
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            animation: pulse 3s infinite;
            line-height: 1.6;
            padding: 0 15px;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .pin-pad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: clamp(10px, 3vw, 15px);
            max-width: 280px;
            margin: 30px auto;
            padding: 0 10px;
        }

        .star-btn {
            width: clamp(60px, 18vw, 80px);
            height: clamp(60px, 18vw, 80px);
            background: radial-gradient(circle, rgba(255,255,255,0.2), transparent);
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 50%;
            color: #fff;
            font-size: clamp(1.2rem, 5vw, 1.8rem);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        .star-btn:active {
            background: radial-gradient(circle, rgba(255,255,255,0.4), transparent);
            transform: scale(0.95);
            box-shadow: 0 0 30px rgba(255,255,255,0.6);
        }

        @media (hover: hover) {
            .star-btn:hover {
                background: radial-gradient(circle, rgba(255,255,255,0.4), transparent);
                transform: scale(1.05);
                box-shadow: 0 0 30px rgba(255,255,255,0.6);
            }
        }

        .pin-display {
            font-size: clamp(1.5rem, 6vw, 2rem);
            letter-spacing: clamp(10px, 3vw, 15px);
            margin: 20px 0;
            min-height: 40px;
            word-break: keep-all;
        }

        .error {
            color: #ff4444;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* GALAXY SCENE */
        #galaxyScene {
            flex-direction: column;
            padding: 20px 0;
        }

        .chapter-container {
            z-index: 10;
            text-align: center;
            padding: 20px;
            max-width: 100%;
            width: 100%;
        }

        .chapter-title {
            font-size: clamp(1.5rem, 6vw, 2.5rem);
            margin-bottom: 30px;
            text-shadow: 0 0 30px rgba(255,255,255,0.9);
            padding: 0 15px;
        }

        .planets-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: clamp(20px, 5vw, 40px);
            margin: 20px auto;
            padding: 20px 10px;
            max-width: 600px;
        }

        .planet {
            width: clamp(70px, 20vw, 100px);
            height: clamp(70px, 20vw, 100px);
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
            animation: float 6s infinite ease-in-out;
            flex-shrink: 0;
            touch-action: manipulation;
        }

        .planet:nth-child(1) {
            background: radial-gradient(circle at 30% 30%, #ff6b9d, #c44569);
            animation-delay: 0s;
        }

        .planet:nth-child(2) {
            background: radial-gradient(circle at 30% 30%, #a8e6cf, #3d9970);
            animation-delay: 0.5s;
        }

        .planet:nth-child(3) {
            background: radial-gradient(circle at 30% 30%, #ffd93d, #f39c12);
            animation-delay: 1s;
        }

        .planet:nth-child(4) {
            background: radial-gradient(circle at 30% 30%, #a29bfe, #6c5ce7);
            animation-delay: 1.5s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        .planet:active {
            transform: scale(1.2) !important;
            box-shadow: 0 0 40px currentColor;
        }

        @media (hover: hover) {
            .planet:hover {
                transform: scale(1.2) !important;
                box-shadow: 0 0 40px currentColor;
            }
        }

        .planet-label {
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(0.7rem, 2.5vw, 0.9rem);
            white-space: nowrap;
            width: max-content;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 2000;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-inner {
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 40px 25px 25px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.3);
            position: relative;
            animation: modalAppear 0.4s ease-out;
            touch-action: pan-y;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2rem;
            cursor: pointer;
            color: #fff;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            user-select: none;
            touch-action: manipulation;
        }

        .modal-close:active {
            transform: scale(0.9);
        }

        .modal-content h2 {
            margin-bottom: 20px;
            font-size: clamp(1.2rem, 5vw, 1.6rem);
            line-height: 1.4;
        }

        .modal-content p {
            line-height: 1.8;
            font-size: clamp(0.95rem, 3.5vw, 1.1rem);
        }

        /* CONSTELLATION ROOM */
        .constellation-container {
            position: relative;
            width: 100%;
            min-height: 40vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .star-word {
            font-size: clamp(2rem, 10vw, 4rem);
            font-weight: bold;
            text-shadow: 0 0 40px #fff;
            animation: starGlow 2s infinite;
            word-break: break-word;
            text-align: center;
        }

        @keyframes starGlow {
            0%, 100% { text-shadow: 0 0 40px #fff; }
            50% { text-shadow: 0 0 60px #fff, 0 0 80px #ff6b9d; }
        }

        /* HIDDEN STAR */
        .hidden-star {
            position: fixed;
            bottom: clamp(20px, 5vh, 40px);
            right: clamp(20px, 5vw, 40px);
            font-size: clamp(2rem, 8vw, 3rem);
            cursor: pointer;
            animation: twinkle 1.5s infinite;
            z-index: 100;
            user-select: none;
            touch-action: manipulation;
            width: clamp(50px, 12vw, 70px);
            height: clamp(50px, 12vw, 70px);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.15); }
        }

        .hidden-star:active {
            transform: scale(0.9) !important;
        }

        /* FINAL REVEAL */
        #finalScene {
            padding: 30px 20px;
        }

        .final-container {
            text-align: center;
            z-index: 10;
            padding: 20px;
            max-width: 600px;
        }

        .final-message {
            font-size: clamp(1rem, 4vw, 1.6rem);
            line-height: 1.8;
            animation: floatIn 2s ease-out;
        }

        @keyframes floatIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .next-btn {
            margin-top: 30px;
            padding: clamp(12px, 3vw, 15px) clamp(30px, 8vw, 50px);
            font-size: clamp(0.95rem, 3.5vw, 1.2rem);
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: #fff;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
            touch-action: manipulation;
        }

        .next-btn:active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.6);
            transform: scale(0.97);
        }

        @media (hover: hover) {
            .next-btn:hover {
                background: rgba(255, 255, 255, 0.4);
                box-shadow: 0 0 30px rgba(255, 255, 255, 0.6);
                transform: scale(1.03);
            }
        }

        /* Nebula text animation */
        .nebula-text {
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
        }

        @media (max-width: 480px) {
            .planets-container {
                gap: 30px 20px;
            }
            
            .planet-label {
                font-size: 0.75rem;
            }
        }

        /* White Heart Styles */
        .white-heart {
            cursor: pointer;
            user-select: none;
            touch-action: manipulation;
        }

        .white-heart.glowing {
            animation: glow 1s infinite alternate;
            text-shadow: 0 0 10px #fff;
        }

        @keyframes glow {
            0% { text-shadow: 0 0 10px #fff; }
            100% { text-shadow: 0 0 20px #fff, 0 0 30px #ff6b9d; }
        }

        /* Gallery Scene */
        #galleryScene {
            flex-direction: column;
            padding: 20px;
        }

        .gallery-container {
            position: relative;
            width: min(100%, 540px);
            height: min(100vh - 100px, 960px);
            margin: auto;
            overflow: hidden;
        }

        .slides img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            object-fit: contain;
        }

        .slides img.active {
            opacity: 1;
        }

        .gallery-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
        }

        .gallery-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: #fff;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .gallery-btn:active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0.97);
        }

        @media (hover: hover) {
            .gallery-btn:hover {
                background: rgba(255, 255, 255, 0.4);
                transform: scale(1.03);
            }
        }
    </style>
</head>
<body>
    <canvas id="stars"></canvas>

    <!-- PIN ENTRY SCENE -->
    <div id="pinScene" class="scene active">
        <div class="pin-container">
            <div class="cosmic-text">
                üåå Yeh universe locked hai..‚Ä¶<br>
                Sirf wahi jaa sakta hai jiska naam taarein likh chuke hain.
            </div>
            <div class="pin-display" id="pinDisplay">‚óã‚óã‚óã‚óã</div>
            <div class="pin-pad" id="pinPad"></div>
        </div>
    </div>

    <!-- GALAXY SCENE -->
    <div id="galaxyScene" class="scene">
        <div class="chapter-container">
            <h1 class="chapter-title" id="chapterTitle">The Beginning</h1>
            <div id="chapterContent"></div>
            <button class="next-btn" id="nextBtn">Continue Journey ‚Üí</button>
        </div>
        <div class="hidden-star" id="hiddenStar" style="display: none;">üí´</div>
    </div>

    <!-- FINAL REVEAL SCENE -->
    <div id="finalScene" class="scene">
        <div class="final-container">
            <div class="final-message" id="finalMessage"></div>
        </div>
    </div>

    <!-- GALLERY SCENE -->
    <div id="galleryScene" class="scene">
        <div class="gallery-container">
            <div class="slides">
                <img src="image/1.jpeg" alt="Slide 1">
                <img src="image/2.jpeg" alt="Slide 2">
                <img src="image/3.jpeg" alt="Slide 3">
                <img src="image/4.jpeg" alt="Slide 4">
                <img src="image/5.jpeg" alt="Slide 5">
                <img src="image/6.jpeg" alt="Slide 6">
                <img src="image/7.jpeg" alt="Slide 7">
                <img src="image/8.jpeg" alt="Slide 8">
                <img src="image/9.jpeg" alt="Slide 9">
                <img src="image/10.jpeg" alt="Slide 10">
            </div>
            <div class="gallery-controls">
                <button class="gallery-btn" id="prevGalleryBtn">Prev</button>
                <button class="gallery-btn" id="nextGalleryBtn">Next</button>
            </div>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal" id="modal">
        <div class="modal-inner">
            <span class="modal-close" id="modalClose">√ó</span>
            <div class="modal-content" id="modalContent"></div>
        </div>
    </div>

    <script>
        // ===== CONFIGURATION =====
        const CONFIG = {
            mainPIN: '4827',
            secretPIN: '2322',
            thirdPIN: '1234', // Assumed third PIN; change as needed
            herName: 'Saraaaaaa‚ô•Ô∏è'
        };

        // ===== PREVENT ZOOM ONLY (Allow scrolling) =====
        let lastTouchEnd = 0;
        document.addEventListener('touchend', (e) => {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // ===== STAR CANVAS ANIMATION =====
        const canvas = document.getElementById('stars');
        const ctx = canvas.getContext('2d');
        let stars = [];
        let nebulaColor = [138, 43, 226];
        let animationId;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        function createStars() {
            stars = [];
            const starCount = window.innerWidth < 768 ? 100 : 200;
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 1.5 + 0.5,
                    vx: (Math.random() - 0.5) * 0.3,
                    vy: (Math.random() - 0.5) * 0.3,
                    opacity: Math.random() * 0.5 + 0.5
                });
            }
        }

        function animateStars() {
            ctx.fillStyle = `rgba(${nebulaColor[0]}, ${nebulaColor[1]}, ${nebulaColor[2]}, 0.05)`;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            stars.forEach(star => {
                star.x += star.vx;
                star.y += star.vy;

                if (star.x < 0 || star.x > canvas.width) star.vx *= -1;
                if (star.y < 0 || star.y > canvas.height) star.vy *= -1;

                star.opacity += (Math.random() - 0.5) * 0.05;
                star.opacity = Math.max(0.3, Math.min(1, star.opacity));

                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
                ctx.fill();
            });

            animationId = requestAnimationFrame(animateStars);
        }

        resizeCanvas();
        createStars();
        animateStars();

        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                resizeCanvas();
                createStars();
            }, 250);
        });

        // ===== AUDIO CONTEXT (Handle mobile autoplay restrictions) =====
        let audioContext;
        let isAudioEnabled = false;

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                isAudioEnabled = true;
            }
        }

        // ===== PIN SYSTEM =====
        let enteredPIN = '';
        let isSecretPIN = false;
        let isThirdPIN = false;
        const pinDisplay = document.getElementById('pinDisplay');
        const pinPad = document.getElementById('pinPad');

        function createPinPad() {
            pinPad.innerHTML = '';
            
            for (let i = 1; i <= 9; i++) {
                const btn = document.createElement('button');
                btn.className = 'star-btn';
                btn.textContent = i;
                btn.onclick = () => {
                    initAudio();
                    addDigit(i);
                };
                pinPad.appendChild(btn);
            }
            
            const clearBtn = document.createElement('button');
            clearBtn.className = 'star-btn';
            clearBtn.textContent = '‚Üê';
            clearBtn.onclick = clearPIN;
            pinPad.appendChild(clearBtn);

            const zeroBtn = document.createElement('button');
            zeroBtn.className = 'star-btn';
            zeroBtn.textContent = '0';
            zeroBtn.onclick = () => {
                initAudio();
                addDigit(0);
            };
            pinPad.appendChild(zeroBtn);

            const enterBtn = document.createElement('button');
            enterBtn.className = 'star-btn';
            enterBtn.textContent = '‚úì';
            enterBtn.onclick = () => {
                initAudio();
                checkPIN();
            };
            pinPad.appendChild(enterBtn);
        }

        function addDigit(digit) {
            if (enteredPIN.length < 4) {
                enteredPIN += digit;
                const filled = '‚óè'.repeat(enteredPIN.length);
                const empty = '‚óã'.repeat(4 - enteredPIN.length);
                pinDisplay.textContent = filled + empty;
                playSound('ping');
            }
        }

        function clearPIN() {
            enteredPIN = '';
            pinDisplay.textContent = '‚óã‚óã‚óã‚óã';
        }

        function checkPIN() {
            let correctPIN;
            if (isThirdPIN) {
                correctPIN = CONFIG.thirdPIN;
            } else if (isSecretPIN) {
                correctPIN = CONFIG.secretPIN;
            } else {
                correctPIN = CONFIG.mainPIN;
            }
            
            if (enteredPIN === correctPIN) {
                playSound('success');
                nebulaColor = [255, 105, 180];
                
                if (isThirdPIN) {
                    setTimeout(() => showGallery(), 1000);
                } else if (isSecretPIN) {
                    setTimeout(() => showFinalReveal(), 1000);
                } else {
                    setTimeout(() => unlockUniverse(), 1000);
                }
            } else {
                playSound('error');
                pinDisplay.classList.add('error');
                pinDisplay.textContent = 'Not the right key...';
                setTimeout(() => {
                    pinDisplay.classList.remove('error');
                    clearPIN();
                }, 1500);
            }
        }

        function playSound(type) {
            if (!isAudioEnabled || !audioContext) return;
            
            try {
                const freq = type === 'ping' ? 800 : type === 'success' ? 1200 : 400;
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = freq;
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log('Audio play failed:', e);
            }
        }

        function unlockUniverse() {
            switchScene('pinScene', 'galaxyScene');
            startChapter(0);
        }

        // ===== CHAPTER SYSTEM =====
        const chapters = [
            {
                title: 'The Beginning',
                content: `
                    <div class="planets-container">
                        <div class="planet" data-memory="0">
                            <div class="planet-label">Wohh Dinn‚ô•Ô∏è</div>
                        </div>
                    </div>
                `,
                memories: [
                    {
                        title: 'Saraaaaa ‚ô•Ô∏è',
                        text: `Us din jab hum mile the na sab kuch alag tha... hawa bhi alag chal rahi thi, waqt bhi jaise ruk sa gaya tha. Mujhe yaad hai tum mere saamne thi aur uss pal mein sab kuch bas tum par ruk gaya tha. Tumhari aankhon ka wo gehra nasha, tumhari muskaan ka wo halka sa chamak, tumhari saansein jo mere dil ki dhadkanon ke saath mil rahi thi... uss din laga tha jaise duniya ka saara sukoon mujhe mil gaya ho.
                        
Tum mere paas thi, itni kareeb ke main tumhe mehsoos kar sakta tha aur uss ek pal ne meri poori zindagi badal di. Tum meri aankhon ke saamne thi lekin lagta tha jaise main poori duniya tumhare zariye dekh raha hoon. Tum meri baahon mein sirf ek ehsaas nahi thi, tum meri zindagi ka sabse gehra lamha thi. Uss raat samundar ke kinaare sirf hawa nahi chal rahi thi, kuch mere andar bhi badal raha tha... jaise meri rooh ne tumhe apna ghar maan liya ho.

Uss din mujhe samajh aaya tha ke tum meri aadat nahi, meri zarurat ho. Tum mere din ka sukoon, meri raat ka armaan ban gayi thi. Tum meri khamoshi ka matlab, meri dua ka jawab aur meri zindagi ka sabse khoobsurat hissa ban gayi thi.

Aur tab se aaj tak kuch bhi waisa nahi raha. Tumhare bina waqt guzarta toh hai par mehsoos nahi hota. Tum meri soch, meri rooh, meri har dua ka sabse gehra hissa ban chuki ho. Tum meri zindagi mein kisi khaali jagah ko bharne ke liye nahi aayi thi, tum meri poori zindagi ban gayi ho.

Main maanta hoon main kabhi galat tha. Maine kuch pal aise bana diye jo tum deserve nahi karti thi aur uss baat ka bojh mere dil se kabhi kam nahi hoga. Lekin uss din ke baad, uss milan ke baad, ek cheez kabhi nahi badli... mera pyaar tumse.

Sara ‚ô•Ô∏è uss din samundar ke kinaare jo lamha humne mehsoos kiya tha, vo meri zindagi ka sabse khoobsurat pal tha. Uss pal mein main sirf tumhara Asif ban gaya tha, jo tumhari aankhon mein apna ghar dekhta hai, tumhari muskaan mein jeeta hai aur tumhari baahon mein apni poori zindagi mehsoos karta hai.

Aaj bhi jab main aankhein band karta hoon, mujhe wahi raat yaad aati hai... wahi tum, wahi saansein, wahi sukoon. Tum meri duniya ho Sara, meri dua, meri zarurat, meri last had. Aur main bas itna jaanta hoon, uss din se lekar aaj tak, main tumhare bina kabhi poora nahi raha. ‚ù§Ô∏è‚ú®`
                    }
                ]
            },
            {
                title: 'The Planets of Us',
                content: `
                    <div class="planets-container">
                        <div class="planet" data-memory="0">
                            <div class="planet-label">Ahmiyat Tumhari</div>
                        </div>
                        <div class="planet" data-memory="1">
                            <div class="planet-label">Meri Jaaannn‚ô•Ô∏è</div>
                        </div>
                        <div class="planet" data-memory="2">
                            <div class="planet-label">Saraaaa‚ô•Ô∏è</div>
                        </div>
                        <div class="planet" data-memory="3">
                            <div class="planet-label">Meri Baccchiüíû</div>
                        </div>
                    </div>
                `,
                memories: [
                    { title: 'Ahmiyat Tumhari', text: `Saraaaaaa‚ô•Ô∏è

Pata nahi kab aur kaise hua bas itna jaanta hoon ki jabse tum meri zindagi mein aayi ho sab kuch alag lagta hai sab kuch zinda lagta hai Tum meri aadat nahi ho tum meri zarurat ho Tum meri life ka woh hissa ban gayi ho jiske bina main soch bhi nahi sakta apna aaj apna kal

Main kabhi explain nahi kar paunga ki main tumhe kitna chaahta hoon bas har din har pal har saans mein tum ho Tum meri duniya ka sabse khoobsurat ehsaas ho ek aisa ehsaas jo shabd se pare hai jise main sirf mehsoos kar sakta hoon bayan nahi

Tum perfect nahi ho par meri nazar mein tumse zyada perfect koi ho hi nahi sakta Tumhaari har chhoti si baat har nakhra har hasi sab kuch mere dil mein bas gaya hai Mujhe farq nahi padta duniya kya sochti hai mujhe sirf tumse matlab hai sirf tumse

Aur haan main jaanta hoon duniya ke liye shayad yeh pagalpan lage par mujhe tumse pyaar karna ek ibadat lagta hai Main tumhare bina apne astitva ka matlab nahi samajh paata Agar zarurat padhi na toh main sabse lad jaunga duniya se kismat se khud se bhi bas tum meri zindagi mein raho

Main nahi jaanta pyaar ko kaise define karte hain log par mere liye pyaar sirf tum ho Saraaaaaa‚ô•Ô∏è
Mujhe tum chahiye har din har pal har janam

Bas ek baat yaad rakhna
Main tumhe chhod nahi sakta bhool nahi sakta aur kisi aur mein tumhe dhoondh bhi nahi sakta
Mera dil sirf tumhara hai aur rahega hamesha‚ú®` },
                    { title: 'Meri Jaaannn‚ô•Ô∏è', text: `Tum meri zindagi mein aayi aur sab kuch badalne laga Tumne mujhe sikhaya ki mohabbat sirf lafzon se nahi hoti usse mehsoos kiya jaata hai Tumne mere andar ka wo hissa zinda kar diya jo main khud bhool gaya tha Tum mere dinon mein sukoon aur raaton mein ek sense of peace le aayi ho

Tumne mujhe samjha jaise main khud ko kabhi nahi samajh paaya Tumne meri zindagi ko ek wajah di hai ek rhythm di hai Tumhari presence mere liye sirf comfort nahi hai wo ek assurance hai ke main jahan bhi rahun mujhe koi aisi shakl duniya mein mili hai jahan main poora mehsoos karta hoon

Main tumhe dekh kar sirf khubsurti nahi dekhta main wo insaan dekhta hoon jise meri zindagi ne apne sabse gehre hisse mein likha hai Tum meri duniya ki sabse imandaar sachchai ho tum meri har khamoshi ka jawab ho aur meri har thakan ke baad ka sukoon ho

Tum meri life ka sabse precious part ho Tum wo ho jiske hone se main apne aap ko behtar insaan mehsoos karta hoon Tum meri zarurat nahi meri aadat ban gayi ho aur ye aadat main kabhi chhodna nahi chahta Tum meri duniya ka wo hissa ho jahan sab kuch sahi lagta hai Tum meri simplicity aur meri peace dono ho` },
                    { title: 'Saraaaa‚ô•Ô∏è', text: `Saraaaa‚ô•Ô∏è

Kuch cheezein lafzon me bayan nahi hoti bas mehsoos hoti hain aur tum unhi me se ek ho
Tum meri zindagi ka wo hissa ho jise main har roz aur gehra mehsoos karta hoon tum meri life ka sabse khoobsurat sach ho ek aisi presence jo mere din meri raat mere har emotion ka hissa ban chuki hai

Mujhe kabhi kabhi lagta hai ke zindagi ne mujhe sabse badi blessing tumhare roop me di hai tum sirf meri love nahi ho tum meri aadat ho meri dua ho meri sukoon ho tumhara ek haan mujhe poora kar deta hai aur tumhara ek naraz karna mujhe andar tak tod deta hai

Jo kuch maine aakhri dino me kaha jise maine galat tareeke se express kiya wo meri soch thi par meri niyat kabhi buri nahi thi main gussa hua rude ho gaya shayad kuch shabd zyada keh diye par un sabke peeche ek hi baat thi tum mere liye kitni important ho
Main kabhi tumse door rehke nahi chal sakta main jitna apne dil ko samjhata hoon utna hi ye dil tumhare kareeb bhagna chahta hai

Tumhari presence mere liye kisi sukoon se kam nahi tumhara muskurana meri duniya me roshni bhar deta hai tumhari awaaz mere dil ke andar tak utar jaati hai tum meri strength bhi ho aur meri weakness bhi aur main khushi se dono hone ke liye tayyar hoon bas tum mere saath raho

Saraaaa‚ô•Ô∏è tumhari beauty sirf dekhi nahi jaati wo mehsoos hoti hai tumhara chehra meri aankhon ko sukoon deta hai tumhari aankhein meri duniya sambhal leti hain tumhare dil ki softness aur tumhare jazbaat ki gehraai mujhe har roz aur gehra pyaar karna sikhati hai

Main kabhi perfect nahi ho sakta par tumhare liye apni har limit todne ko tayyar hoon tum meri life ka wo hissa ho jise main har dua me maangta hoon har khwahish me dekhta hoon tum meri journey nahi meri destination ho

Main chahta hoon jab bhi tum mere naam ka zikr karo to tumhe fakhr mehsoos ho sukoon mile aur tumhe lage ke haan yehi hai wo insaan jo mujhe dil se chahne ke liye bana hai

Main sirf tumhe paana nahi chahta main tumhe sambhalna chahta hoon
Sirf tumse milna nahi chahta main tumhare saath poori zindagi jeena chahta hoon

Tum meri rooh ho meri dua ho meri sabse badi jeet ho
Aur main hamesha tumhara rahunga Saraaaa‚ô•Ô∏è sirf tumhara üíû` },
                    { title: 'Meri Baccchiüíû', text: `Meri Saraaaaaa‚ô•Ô∏è

Main jaanta hoon aaj mere lafz kam pad jaayenge
kyunki jo galatfehmi tumhare dil mein hai uska dard main mehsoos kar sakta hoon
Tum sochti ho shayad main tumse door ho gaya hoon ya tumse dhokha kar raha hoon
lekin meri jaan sach yeh hai ki main tumse itna pyaar karta hoon
ki khud ko bhi bhool jaata hoon bas tumhe mehsoos karte hue

Main maanta hoon maine kuch aise pal diye honge jahan tumhe laga hoga
ki main badal gaya hoon
par meri rooh ke andar sirf ek hi chehra basa hai
tumhara Saraaaaaa‚ô•Ô∏è
Mera dil sirf tumhare liye dhadakta hai
meri har dua tumhare liye uthti hai
aur meri har subah tumhare naam se hi hoti hai

Tum meri zindagi ka sabse khoobsurat ehsaas ho
tum meri duniya ka wo hissa ho jahan sab kuch ruk jaata hai bas tumhari muskurahat dekh kar
tumhari aankhon mein jo roshni hai wo meri zindagi ka noor hai
tumhari awaaz mere din ka sukoon hai
aur tumhara hona meri duniya ka sabse bada sukh hai

Saraaaaaa‚ô•Ô∏è main kabhi tumhe dhokha nahi de sakta
na soch mein na irade mein
kyunki main tumse mohabbat nahi ibadat karta hoon
tum meri duaon ka jawab ho
tum meri zindagi ka maksad ho
aur tumhare bina main adhura nahi balki bejaan hoon

Main jaanta hoon maafi har cheez ka hal nahi hoti
lekin main sirf maafi nahi
tumhara vishwas wapas paana chahta hoon
main vaada karta hoon main woh insaan ban ke rahunga
jo sirf tumhara hai aur hamesha tumhara hi rahega

Bas ek moka de do
main tumhe dikhana chahta hoon
ki mera pyaar na lafzon se naap sakti ho na shak se tod sakti ho
yeh pyaar meri rooh ka hissa hai
aur meri rooh sirf tumse judi hai

Saraaaaaa‚ô•Ô∏è tum meri duniya meri dua aur meri zindagi ho
aur main yeh zindagi sirf tumhare saath jeena chahta hoon` }
                ]
            },
            {
                title: 'The Constellation Room',
                content: `
                    <div class="constellation-container">
                        <div class="star-word">FOREVER</div>
                    </div>
                `,
                memories: []
            },
            {
                title: 'Meri Biwiüíó',
                content: `
                    <div class="nebula-text cosmic-text">
                        Saraaaa ‚ô•Ô∏è

Pyaar mere liye sirf ek lafz nahi woh har ehsaas hai jo main tumhare liye mehsoos karta hoon
Kabhi gussa hota hoon toh tumse nahi khud se hota hoon ki tum meri baat samajh nahi rahi ho

Izzat maangi nahi jaati mehsoos karayi jaati hai aur woh tumhare haathon mein hai
Main chahta hoon tum kuch chizze khud se karo main tumhara humsafar banna chahta hoon teacher nahi

Jab gussa hota hoon ya rude ho jaata hoon iska matlab yeh nahi ki mujhe farak nahi padta
Tumhara farz hai mujhe manane ka mujhe apna feel karane ka

Main chahta hoon koi ho jo proud feel kare ki main uska hoon jo mujhse itna pyaar kare ki main khudko usmein bhool jaun
Aur woh sab tum mein hai Sara
Bas kabhi kabhi tum bhool jaati ho aur main sirf yaad dilata hoon ki tum mere liye kitni important ho aur main tumse kitna pyaar karta hoon
                    </div>
                `,
                memories: []
            }
        ];

        let currentChapter = 0;
        let constellationInterval;
        let heartbeatInterval;

        function startChapter(index) {
            currentChapter = index;
            const chapter = chapters[index];
            
            document.getElementById('chapterTitle').textContent = chapter.title;
            document.getElementById('chapterContent').innerHTML = chapter.content;

            // Clear previous intervals
            if (constellationInterval) clearInterval(constellationInterval);
            if (heartbeatInterval) clearInterval(heartbeatInterval);

            if (chapter.memories.length > 0) {
                setTimeout(() => {
                    document.querySelectorAll('.planet').forEach(planet => {
                        planet.onclick = () => {
                            const memoryIndex = parseInt(planet.dataset.memory);
                            showMemory(chapter.memories[memoryIndex]);
                        };
                    });
                }, 100);
            }

            if (index === 2) {
                animateConstellation();
            }

            if (index === 3) {
                playHeartbeat();
                setTimeout(() => {
                    document.getElementById('hiddenStar').style.display = 'flex';
                }, 2000);
            }
        }

        function showMemory(memory) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <h2>${memory.title}</h2>
                <p>${memory.text}</p>
            `;
            
            modal.classList.add('active');
        }

        function animateConstellation() {
            const words = ['FOREVER', 'HOME', CONFIG.herName.toUpperCase()];
            let wordIndex = 0;
            const starWord = document.querySelector('.star-word');
            
            constellationInterval = setInterval(() => {
                wordIndex = (wordIndex + 1) % words.length;
                starWord.style.opacity = '0';
                setTimeout(() => {
                    starWord.textContent = words[wordIndex];
                    starWord.style.opacity = '1';
                }, 300);
            }, 3000);
        }

        function playHeartbeat() {
            if (!isAudioEnabled || !audioContext) return;
            
            function beat() {
                try {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 100;
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                } catch (e) {
                    console.log('Heartbeat sound failed:', e);
                }
            }
            
            heartbeatInterval = setInterval(() => {
                beat();
                setTimeout(beat, 200);
            }, 1200);
        }

        document.getElementById('nextBtn').onclick = () => {
            if (currentChapter < chapters.length - 1) {
                startChapter(currentChapter + 1);
                window.scrollTo(0, 0);
            }
        };

        document.getElementById('hiddenStar').onclick = () => {
            initAudio();
            isSecretPIN = true;
            enteredPIN = '';
            pinDisplay.textContent = '‚óã‚óã‚óã‚óã';
            document.querySelector('.cosmic-text').innerHTML = 'üîê One more secret remains...<br>Only the deepest connection knows this key.';
            document.getElementById('hiddenStar').style.display = 'none';
            switchScene('galaxyScene', 'pinScene');
        };

        function showFinalReveal() {
            switchScene('pinScene', 'finalScene');
            
            const message = `
                ‚ú® ${CONFIG.herName} Tum jaanti ho main har din tumhe bas dekhta hoon
sirf aankhon se nahi dil se
Aur jitna zyada main tumhe samajhta jaata hoon
utna hi mujhe ehsaas hota hai ki tum meri zindagi ka sabse khoobsurat hissa ho üåô

Main notice karta hoon tumhara har effort
chahe chhoti si baat ho ya kisi din ka mood off ho
tum fir bhi koshish karti ho sab kuch theek banaye rakhne ki
Kabhi kuch keh nahi paati par main mehsoos kar leta hoon woh khamoshi ke peeche ka pyaar ü§ç

Tum meri zindagi mein sirf khushi nahi laayi
tumne mujhe ek aur version dikhaya
jahaan main behtar banna chahta hoon
sirf isliye kyunki tum deserve karti ho woh version üåø

Tumhari importance sirf iss baat mein nahi hai ke tum meri life mein ho
balki iss baat mein hai ke tum uss life ko maayne deti ho
Tum mere din ko balance karti ho meri soch ko shaant karti ho
aur mere dil ko ek ajeeb sukoon deti ho
jo shayad main kabhi kisi aur ke saath mehsoos nahi kar sakta ü©∂

Kabhi kabhi main shant ho jaata hoon
par tumhare bina sab kuch adhoora lagta hai
Tum meri aadat nahi meri zarurat ho
Aur main chahta hoon tum yeh hamesha yaad rakho
tum sirf pyaari nahi ho tum ehm ho üåô‚ú®

Tumhari har muskaan mere din ka sabse khoobsurat pal hoti hai
aur tumhara saath mere liye ek dua jaisa hai
jisko main har roz dil se maangta hoon
bina kisi shart bina kisi wajah ke bas tum ü§ç
            `;
            
            const finalMsg = document.getElementById('finalMessage');
            finalMsg.innerHTML = '';
            let i = 0;
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = message;
            const text = tempDiv.textContent; // Use textContent for typing
            
            function typeMessage() {
                if (i < text.length) {
                    finalMsg.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(typeMessage, 30);
                } else {
                    // After typing, wrap the white hearts
                    finalMsg.innerHTML = finalMsg.innerHTML.replace(/ü§ç/g, '<span class="white-heart">ü§ç</span>');
                    attachLongPressListeners();
                }
            }
            
            typeMessage();
        }

        function attachLongPressListeners() {
            const hearts = document.querySelectorAll('.white-heart');
            hearts.forEach(heart => {
                let pressTimer;
                let glowTimer;

                const startPress = (e) => {
                    e.preventDefault();
                    glowTimer = setTimeout(() => {
                        heart.classList.add('glowing');
                    }, 2000);
                    pressTimer = setTimeout(() => {
                        if (navigator.vibrate) navigator.vibrate(200);
                        triggerThirdPIN();
                    }, 3000);
                };

                const endPress = () => {
                    clearTimeout(pressTimer);
                    clearTimeout(glowTimer);
                    heart.classList.remove('glowing');
                };

                heart.addEventListener('touchstart', startPress, {passive: true});
                heart.addEventListener('touchend', endPress);
                heart.addEventListener('touchcancel', endPress);
                heart.addEventListener('mousedown', startPress);
                heart.addEventListener('mouseup', endPress);
                heart.addEventListener('mouseleave', endPress);
            });
        }

        function triggerThirdPIN() {
            isThirdPIN = true;
            isSecretPIN = false;
            enteredPIN = '';
            pinDisplay.textContent = '‚óã‚óã‚óã‚óã';
            document.querySelector('.cosmic-text').innerHTML = 'üîê The deepest secret awaits...<br>Enter the key of pure love.';
            switchScene('finalScene', 'pinScene');
        }

        function showGallery() {
            switchScene('pinScene', 'galleryScene');
            initGallery();
        }

        let currentSlide = 0;
        function initGallery() {
            const slides = document.querySelectorAll('.slides img');
            const prevBtn = document.getElementById('prevGalleryBtn');
            const nextBtn = document.getElementById('nextGalleryBtn');

            function showSlide(n) {
                slides.forEach(s => s.classList.remove('active'));
                currentSlide = (n + slides.length) % slides.length;
                slides[currentSlide].classList.add('active');
            }

            prevBtn.onclick = () => showSlide(currentSlide - 1);
            nextBtn.onclick = () => showSlide(currentSlide + 1);

            showSlide(0);
        }

        function switchScene(from, to) {
            document.getElementById(from).classList.remove('active');
            setTimeout(() => {
                document.getElementById(to).classList.add('active');
                window.scrollTo(0, 0);
            }, 500);
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        document.getElementById('modalClose').onclick = closeModal;
        
        // Close modal when clicking outside
        document.getElementById('modal').onclick = (e) => {
            if (e.target.id === 'modal') {
                closeModal();
            }
        };

        // Initialize
        createPinPad();
    </script>
</body>
</html>
